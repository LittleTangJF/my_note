## 简单过程

以react16为例
-   mount（挂载）的顺序是 `父组件 -> 子组件`
-   effect（副作用）的顺序是 `子组件 -> 父组件`，而在兄弟（同级）组件中，先渲染的会先执行

## re-render的原因

### 1、re-render：状态变化

state变化

### 2、re-render：父组件重新渲染

父组件重新渲染会导致子组件全部重新渲染，而子组件渲染则不会导致父组件重新渲染

### 3、re-render：context重新渲染

该 Context 的所有组件都要 re-render，即使它们并没有使用发生变化的那部分数据。参考防止由 Context 引起的重新渲染

### 4、re-render：hooks 变化

-   hooks 内部的状态变化会触发组件的 re-render
-   如果 hooks 使用了 context，并且 context 的值发生了变化，也会触发组件的 re-render

## 避免re-render

### 1、下放state到子组件

### 2、children作为props

### 3、组件作为props

跟上面的模式类似，将状态封装在一个较小的组件中，而较重的组件作为 props 传递给它。props 不受 state 变化的影响，因此该较重的组件不会被重新渲染。这个模式适用于那些状态独立的复杂组件，并且不能抽离成一个 `children` 属性的场景。

### 4、使用memo

用 React.memo 包装的组件会阻止重新渲染，除非这个组件的 props 发生了变化。这对于不依赖于重新渲染的组件，是非常有用的。