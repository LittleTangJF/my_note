
## CSRF

CSRF(Cross-site request forgey)`跨站请求伪造`：攻击者诱导受害者进入第三方网站，在`第三方网站`中向被攻击者网站发送`跨站请求`。利用受害者在攻击网站已经获取的注册凭证，绕过后台用户验证，达到冒充用户对被攻击的网站执行某种操作的目的。

### 案例

1、受害者登陆过a网站
2、攻击者诱导受害者登陆b网站，b网站向a网站发送跨站请求，浏览器默认携带上a网站的cookie
3、a网站收到请求，并确认是受害者的凭证，误以为是受害者发送的
4、攻击完成

### 方式

图片、超链接、form表单提交

### 如何解决

1、阻止外来不明域名的访问：携带两个Header,用于标记来源域名：origin header / referer header
2、_**`SameSite Cookie`**_  严格模式  、 宽松模式
3、_**`双重Cookie验证`**_ ：提交前先用js读取用于验证的cookie值加入到提交字段，这样验证字段有两份，`一份在cookie中，一份在POST或者URL中`。那CSRF只能让请求中带有Cookie但是不能读取cookie加入到POST或URL中

## XXS攻击

Cross-Site Scripting(`跨站脚本攻击，简称XSS`)，是一种`恶意代码注入攻击`。供给者通过在目标网站注入恶意脚本，使之在用户浏览器上运行。利用这些恶意脚本，`供给者可获取用户的敏感信息`，如Cookie、SessionId等，进而危害数据安全。

### 攻击分类

存储型、反射型、**DOM型**

存储型XSS的恶意代码存在数据库里，反射型XSS的恶意代码存在URL里；
DOM型与前两种的区别：DOM型XSS攻击中，取出和执行恶意代码由浏览器完成，属于**前端JS**自身的安全漏洞，其他两种XSS都属于**服务端**的安全漏洞

#### 存储型 攻击步骤

1.  攻击者将恶意代码提交到目标网站的`数据库`中
2.  用户打开目标网站时，网站服务端 将 恶意代码从数据库取出，拼接在HTML中返回给浏览器
3.  用户浏览器接受到响应后解析执行，混在 其中 的恶意代码 也被执行
#### **反射型XSS攻击步骤**

1. 攻击者构造出 `特殊的URL`，其中包括恶意代码
2. 用户访问恶意代码URL时 ，网站服务将 恶意代码从URL中取出，拼接在HTML中返回浏览器
3. 用户浏览器接收到响应后执行， 混在其中的恶意代码也被执行
#### **DOM型**

1. 攻击者构造出 特殊的URL , 其中包含恶意代码
2. 用户打开带有恶意代码的URL
3. 用户浏览器 接收到响应后解析执行 ， **前端js**取出URL中的恶意代码并执行

