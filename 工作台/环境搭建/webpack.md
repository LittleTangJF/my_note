[原理](https://juejin.cn/post/6844904046294204429)
## 搭建流程


webpack运行流程是一个串行的过程，从启动到结束会依次执行以下流程

- -   `初始化参数`：从配置文件和 Shell 语句中读取与合并参数，得出最终的参数
- -   `开始编译`：用上一步得到的参数初始化 Compiler 对象，加载所有配置的插件，执行对象的 run 方法开始执行编译
- -   `确定入口`：根据配置中的 entry 找出所有的入口文件
- -   `编译模块`：从入口文件出发，调用所有配置的 Loader 对模块进行翻译，再找出该模块依赖的模块，再递归本步骤直到所有入口依赖的文件都经过了本步骤的处理
- -   `完成模块编译`：在经过第4步使用 Loader 翻译完所有模块后，得到了每个模块被翻译后的最终内容以及它们之间的依赖关系
- -   `输出资源`：根据入口和模块之间的依赖关系，组装成一个个包含多个模块的 Chunk，再把每个 Chunk 转换成一个单独的文件加入到输出列表，这步是可以修改输出内容的最后机会
- -   `输出完成`：在确定好输出内容后，根据配置确定输出的路径和文件名，把文件内容写入到文件系统

在以上过程中，`Webpack` 会在特定的时间点广播出特定的事件，插件在监听到感兴趣的事件后会执行特定的逻辑，并且插件可以调用 Webpack 提供的 API 改变 Webpack 的运行结果。

## source map## 是什么？生产环境怎么用？

`source map` 是将编译、打包、压缩后的代码映射回源代码的过程。打包压缩后的代码不具备良好的可读性，想要调试源码就需要 soucre map。

## 文件监听原理呢？

发现源码发生变化时，自动重新构建出新的输出文件。

Webpack开启监听模式，有两种方式：

-   启动 webpack 命令时，带上 --watch 参数

## 说一下 Webpack 的热更新原理吧

关键： Hot Module Replacement 、 WDS 、 Websocket

1. 本地资源变化，WDS向浏览器推送更新
2. 客户端对比差异，想WDS发送ajax请求获取文件内容
3. 继续发起jsonp请求该chunk的增量更新
4. 接下来就是Hot Module plugin来处理给更新
5. 
## 文件指纹是什么？怎么用？

-   `Hash`：和整个项目的构建相关，只要项目文件有修改，整个项目构建的 hash 值就会更改
    
-   `Chunkhash`：和 Webpack 打包的 chunk 有关，不同的 entry 会生出不同的 chunkhash
    
-   `Contenthash`：根据文件内容来定义 hash，文件内容不变，则 contenthash 不变