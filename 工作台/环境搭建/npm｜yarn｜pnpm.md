## npm

**发展历程**
1. npm2 嵌套：存在问题，在windows內，路径最大长度260字符
2. npm3 平铺
## yarn

**发展历程**
平铺方案，不同的版本依赖则 嵌套在node_modules

	存在缺陷：1、以上两个方案存在幽灵依赖，没有显式依赖却可以require进来，但是这个包如果不被依赖了，代码就会报错
	2、不同版本的依赖包还是会多次复制，存在磁盘浪费问题

## pnpm

解决了npm和yarn的问题，关键技术，软硬链接link

## 总结

**pnpm** 最近经常会听到，可以说是爆火。本文我们梳理了下它爆火的原因：

**npm2** 是通过嵌套的方式管理 node_modules 的，会有同样的依赖复制多次的问题。

**npm3**+ 和 **yarn** 是通过铺平的扁平化的方式来管理 node_modules，解决了嵌套方式的部分问题，但是引入了幽灵依赖的问题，并且同名的包只会提升一个版本的，其余的版本依然会复制多次。

**pnpm** 则是用了另一种方式，不再是复制了，而是都从全局 store 硬连接到 node_modules/.pnpm，然后之间通过软链接来组织依赖关系。硬连接是有记录的，被引用了几次。当没有被的引用的时候就可以删除

这样不但节省磁盘空间，也没有幽灵依赖问题，安装速度还快，从机制上来说完胜 npm 和 yarn。

pnpm 就是凭借这个对 npm 和 yarn 降维打击的。