
## 技术难点

### 难点1 ： BI多边形报表

关键库 react-grid-layout、react-dnd、react-dnd-html5-backend、domtoimage
1. DndProvider 用于实现图表组件的拖拽
2. DragSource：使组件能够被拖拽
3. DropTarget： 拖拽放置区域 
4. react-grid-layout：提供grid布局，传入对象数组layout
#### 实现过程

1. DragItem 封装组件，使其可被拖拽
2. pageWidgetContainer 拖拽面板封装，DropTarget
3. Widget：放置图表组件（表格、文字、搜索、还有如antd提示框、自定义的数字卡片等）

### 难点2: 客服聊天

关键技术 ： socket.io-client 、 IM

socket(link带token)

#### api
on 监听
1.  events ，根据返回的type区分处理响应事件
2. exception： 异常处理
3. disconnnect: 断开

#### 第二种方案

IM \ WebRTC 第三方封装的SDK

API

```jsx
import SDK from '@/common/components-x/IMDemo/sdk/js/NIM_Web_SDK_v8.4.0'
import WebRTC from '@/common/components-x/IMDemo/sdk/js/NIM_Web_WebRTC_v8.4.0'

// 初始化
SDK?.NIM?.use(WebRTC)

SDK?.NIM?.getInstance({
token
account
appKey
})

```

1. disconnect
2. sendText
3. sendCustomMsg
4. deleteMsg // 撤回
5. \setCurrSession // IM同步完成，设置会话
6. getLocalMsgs

技术难点3: 打印单据

关键技术： Hprint