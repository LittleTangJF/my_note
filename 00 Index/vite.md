
## 1 原理

- - 声明 `script` 标签类型要为 `module`
- - 浏览器发起一个 `get` 请求找到该文件，还有 `import` 的包，会继续发起请求 （利用了强缓存和协商缓存）
- `vite` 的功能就是拦截浏览器发起的请求，在服务端对文件进行处理，在返回给浏览器
- 整个过程没有打包编译，所以速度快很多

### vite

- 直接启动开发服务器，哪个模块请求就对哪个模块实时编译 --按需编译
- 现在浏览器支持es module -- 在开发阶段在代码中不能使用commonjs会报错
- 启动非常快--不需要分析依赖编译
- 在热更新时，改动重新请求该模块即可
- 打包时用rollup进行打包

## 2 优势

### 2.1 buddleless

Vite 直接使用ES Module，利用浏览器去解析文件中import的依赖，对于使用到的依赖通过请求去获得相应的资源文件，最后生成代码的时候不需要任何的构建，**直接把ES module的代码抛给浏览器即可。**

2.2 极速hmr

- 利用了强缓存和协商缓存 ： 不会因为模块数量的膨胀而造成热更新的速度变慢

### 2.3 **真正的按需编译**

Vite 通过浏览器的解析来进行依赖资源的加载，所以在文件没有被使用之前，所有的依赖文件都不用进行处理，真正做到了按需编译。

### 2.4 极致的编译速度

Vite 使用 Esbuild 来进行代码的编译，其中jsx和tsx都是通过Esbuild解析生成AST，再生成最终的es module的代码，commonjs到ES module也使用它来进行转换

**在执行效率上远远高于JavaScript编写的打包器**

2.5 **依赖预构建**

在 Vite 首次运行的时候，会从入口文件出发，对其中的第三方依赖进行分析和打包，并把这些chunk进行缓存，提高页面的加载速度。


[参考链接](https://juejin.cn/post/7129030350914715662)